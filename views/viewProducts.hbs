<div>
  <h1 style="text-align:center;margin-bottom:10px">Welcome {{name}}</h1>
</div>
<div style="text-align:center;margin-bottom:10px;color:red;">{{message}}</div>
  
<div class="products">
  <div class="filters">
    <ul>
      {{#if role}}
        <li data-filter=".des"><a class="links" href="/product/add{{uid}}"><i class="fa fa-plus links"></i> Add more products</a> </li>
      {{else}}
        {{#if cart}}
          <li data-filter=".des"><a class="links" href="/cart/bill/{{uid}}" ><i class="fa fa-check links"></i> Checkout</a> </li>
          <li data-filter=".des"><a class="links" href="/cart/{{uid}}" ><i class="fas fa-tshirt links"></i> Continue shopping</a> </li>
        {{else}}
            <li data-filter=".des"><a class="links" href="/cart/view/{{uid}}"><i class="fa fa-shopping-cart links"></i> My cart</a> </li>
        {{/if}}        
      {{/if}}
    </ul>
  </div>
</div>

{{#if role}}
  <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
      <th></th> 
      <th>Name</th> 
      <th>Dresscode</th>
      <th>Size</th>
      <th>Price</th>
      <th></th>
      <th></th>
    </thead>
    {{#each products}}
    <tbody>
      <tr>
        <td><a href="/product/view{{this.id}}"><button class="btn"><i class="fa fa-eye links"></i> </button></a></td>
        <td>{{this.name}}</td>
        <td>{{this.dresscode}}</td>
        <td>{{this.size}}</td>
        <td>{{this.price}}</td>
        {{#if ../cart}}
            <td><a href="/cart/update{{../uid}}/{{this.id}}"><button class="btn"><i class="fa fa-trash links"></i> Remove</button></a></td>
          {{else}}
            <td><a href="/product/update{{this.id}}"><button class="btn"><i class="fas fa-pencil-alt links"></i> Update</button></a></td>
            <td><a onclick="return confirm('Delete this product ?');"  href="/product/delete{{this.id}}"><button class="btn"><i class="fa fa-trash links"></i> Delete</button></a></td>
        {{/if}}  
      </tr>
    </tbody>  
    {{/each}}
  </table>
{{else}}
  {{#if cart}}
    <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
      <th></th> 
      <th>Name</th> 
      <th>Dresscode</th>
      <th>Size</th>
      <th>Price</th>
      <th></th>
      <th></th>
    </thead>
    {{#each products}}
      <tbody>
        <tr>
          <td><a href="/product/view{{this.id}}"><button class="btn"><i class="fa fa-eye links"></i> </button></a></td>
          <td>{{this.name}}</td>
          <td>{{this.dresscode}}</td>
          <td>{{this.size}}</td>
          <td>{{this.price}}</td>
          {{#if ../cart}}
            <td><a href="/cart/update{{../uid}}/{{this.id}}"><button class="btn"><i class="fa fa-times links"></i> Remove</button></a></td>
          {{else}}
            <td><a href="/product/update{{this.id}}"><button class="btn"><i class="fas fa-pencil-alt links"></i> Update</button></a></td>
            <td><a onclick="return confirm('Delete this product ?');" href="/product/delete{{this.id}}"><button class="btn"><i class="fa fa-trash links"></i> Delete</button></a></td>
          {{/if}}
        </tr>
      </tbody>  
    {{/each}}
    </table>
  {{else}}
    <div class="latest-products">
      <div class="container">
          <div class="row" style="margin-left: 50px; width:100%;margin-right:50px;">
          {{#each products}}
            <div class="col-4 all des product-item">
              <img src="/product/getImage/{{this.id}}" alt=""/>
              <div class="down-content">
                <a href="#"><h4>{{this.name}}</h4></a>
                <h6 style="margin-right:50px;">Rs. {{this.price}}</h6>
                <p>{{this.description}}</p>
                <h5>Material & Care</h5>
                <h6 style="font-size:medium;"></h6>{{this.material}}<br>
                <h6 style="font-size:medium;"></h6>{{this.care}}<br><br>                   
                <a href="/cart/add{{../uid}}/{{this.id}}"><button style="background-image: linear-gradient(#80b3ff,#0066ff);color: white; border:1px solid #80b3ff;border-radius: 5px;" class="btn"><i class="fa fa-plus links"></i> Add to cart</button></a>
              </div>
            </div>
          {{/each}}
        </div>
      </div>
    </div>
  {{/if}}
{{/if}}

<div style="text-align: center;">
  <a href="" id="link1" onClick="getURL();" class="previous">&laquo; Previous</a>
  <a id="link" href="" class="next">Next &raquo;</a>
</div>

<script type="text/javascript">
(function() {
    const params = new URLSearchParams(window.location.search)
    page=params.get('page');
    page=parseInt(page)
    page1=parseInt(page)
    page=page+1;
    page1=page1-1;
    var strLink = "http://localhost:3000/viewProducts?page="+page;
    var strLink1 = "http://localhost:3000/viewProducts?page="+page1;
    document.getElementById("link").setAttribute("href",strLink);
   if (page1>=1) {document.getElementById("link1").setAttribute("href",strLink1);}
})();
</script>